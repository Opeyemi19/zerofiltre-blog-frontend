<mat-sidenav-container class="sidenav-container !overflow-visible bg-skin-bg">

  <!-- APP MOBILE SIDENAV -->
  <mat-sidenav #drawer class="sidenav mobile-sidebar-menu lg:!hidden relative rounded-bl-lg" position="end"
    fixedInViewport [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'" [mode]="'over'" [opened]="false">

    <div class="absolute top-6 right-6 w-fit" (click)="drawer.close()">
      <button type="button" aria-label="Toggle sidenav" (click)="drawer.toggle()">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Side nav toggle icon" class="h-6 w-6 text-primary-500"
          fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <ul>
      <a aria-labelledby="Link to about page" (click)="drawer.close()" class="sidenavLink"
        href="{{servicesUrl}}/#about">
        <div>{{'navbar.about' | translate}}</div>
      </a>

      <a aria-labelledby="Link to about page" (click)="drawer.close()" class="sidenavLink" href="{{coursesUrl}}">
        <div>{{'navbar.courses' | translate}}</div>
      </a>

      <a aria-labelledby="Link to about page" (click)="drawer.close()" class="sidenavLink" routerLink="/articles">
        <div>{{'navbar.blog' | translate}}</div>
      </a>

      <a aria-labelledby="Link to about page" (click)="drawer.close()" class="sidenavLink" href="{{servicesUrl}}"
        target="_blank">
        <div>{{'navbar.portfolio' | translate}}</div>
      </a>

      <a aria-labelledby="Link to about page" *ngIf="!(authService.currentUsr)" (click)="drawer.close()"
        class="sidenavLink" routerLink="/login">
        <div class="!font-medium text-primary-500">{{'navbar.login' | translate}}</div>
      </a>

      <a aria-labelledby="Link to about page" *ngIf="!(authService.currentUsr)" (click)="drawer.close()"
        class="sidenavLink" routerLink="/register">
        <div>{{'navbar.register' | translate}}</div>
      </a>

      <div *ngIf="authService.currentUsr as currentUsr" class="border border-primary-500 rounded-lg p-4 mt-5">
        <div class="flex items-center gap-2">
          <div>
            <app-image *ngIf="currentUsr?.profilePicture" [classes]="'h-10 w-10 rounded-full'"
              [alt]="currentUsr?.fullName" [sourceUrl]="currentUsr?.profilePicture!">
            </app-image>

            <ng-container *ngIf="!currentUsr?.profilePicture">
              <svg xmlns="http://www.w3.org/2000/svg"
                class="h-10 w-10 p-2 border-2 bg-primary-500 border-primary-500 text-white fill-white rounded-full"
                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
            </ng-container>
          </div>
          <div class="flex flex-wrap flex-1 text-sm text-primary-500 font-semibold">
            <span>{{currentUsr.fullName}}</span>
          </div>
        </div>

        <div class="mt-2">
          <a aria-labelledby="Link to about page" routerLink="/user/profile" (click)="drawer.close()"
            class="block py-2 px-1 rounded-md hover:bg-skin-link hover:text-primary-500 text-xs transition-all duration-200">
            <span>{{'navbar.myProfile' | translate}}</span>
          </a>

          <button (click)="logout()" aria-labelledby="logout button"
            class="block w-full text-left py-2 px-1 rounded-md hover:bg-skin-link hover:text-primary-500 text-xs transition-all duration-200">
            <span>{{'navbar.logout' | translate}}</span>
          </button>
        </div>
      </div>

    </ul>
  </mat-sidenav>
  <!-- END APP MOBILE SIDENAV  -->

  <mat-sidenav-content class="!overflow-visible">
    <!-- APP DESKTOP NAVBAR-->
    <header class="header home">
      <mat-toolbar class="header-container">
        <a aria-labelledby="Link to about page" class="logo-link" routerLink="/">
          <div class="logo w-9/12 md:w-10/12 lg:w-11/12">
            <app-image [classes]="'max-w-[145px] sm:max-w-[175px]'" [sourceUrl]="appLogoUrl" [alt]="'Zerofiltre blog'">
            </app-image>
          </div>
        </a>

        <div class="navbar-links hidden lg:flex items-center text-secondary">
          <a aria-labelledby="Link to about page" class="navLink" href="{{servicesUrl}}/#about">
            <div>{{'navbar.about' | translate}}</div>
          </a>

          <a aria-labelledby="Link to about page" class="navLink" href="{{coursesUrl}}">
            <div>{{'navbar.courses' | translate}}</div>
          </a>

          <a aria-labelledby="Link to about page" class="navLink" routerLink="/articles">
            <div>{{'navbar.blog' | translate}}</div>
          </a>

          <a aria-labelledby="Link to about page" class="navLink" href="{{servicesUrl}}" target="_blank">
            <div>{{'navbar.portfolio' | translate}}</div>
          </a>

          <ng-container class="navbar-links-hidden-on-server-rendering" *appShellNoRender>
            <a aria-labelledby="Link to about page" *ngIf="!(authService.currentUsr)" class="navLink"
              routerLink="/login">
              <div class="!font-medium text-primary-500">{{'navbar.login' | translate}}</div>
            </a>
            <a aria-labelledby="Link to about page" *ngIf="!(authService.currentUsr)" class="navLink"
              routerLink="/register">
              <div>{{'navbar.register' | translate}}</div>
            </a>

            <button *ngIf="authService.currentUsr as currentUsr" [matMenuTriggerFor]="menu" class="ml-4"
              aria-label="Example icon-button with a menu">

              <div *ngIf="currentUsr?.profilePicture" class="flex items-center text-sm space-x-2">
                <app-image [classes]="'h-10 w-10 rounded-full'" [sourceUrl]="currentUsr?.profilePicture!"
                  [alt]="currentUsr?.fullName">
                </app-image>
              </div>

              <div *ngIf="!currentUsr?.profilePicture" class="flex items-center text-sm space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg"
                  class="h-10 w-10 p-2 border-2 bg-primary-500 border-primary-500 text-white fill-white rounded-full"
                  fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
              </div>
            </button>

            <mat-menu #menu="matMenu" class="mt-2 font-semibold text-skin-base">
              <a aria-labelledby="Link to about page" routerLink="/user/profile"
                class="block px-4 py-2 hover:bg-skin-link hover:text-primary-500 text-xs transition-all duration-200">
                <span>{{'navbar.myProfile' | translate}}</span>
              </a>

              <button (click)="logout()" aria-labelledby="logout button"
                class="inline-block w-full px-4 py-2 font-semibold hover:bg-skin-link hover:text-primary-500 text-xs transition-all duration-200">
                <span>{{'navbar.logout' | translate}}</span>
              </button>
            </mat-menu>
          </ng-container>

        </div>

        <button type="button" aria-label="Toggle sidenav" (click)="drawer.toggle()" class="lg:hidden">
          <svg xmlns="http://www.w3.org/2000/svg" aria-label="Side nav toggle icon" class="h-6 w-6" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </mat-toolbar>
    </header>
    <div class="min-h-[5px]">
      <mat-progress-bar *ngIf="showRouteLoader" color="accent" mode="indeterminate"></mat-progress-bar>
    </div>
    <!-- END APP DESKTOP NAVBAR -->

    <!-- APP CONTENT -->
    <main>
      <router-outlet></router-outlet>
    </main>
    <!-- END APP CONTENT -->

    <!-- APP FOOTER -->
    <app-footer></app-footer>
    <!-- END APP FOOTER -->
  </mat-sidenav-content>

  <!-- PROFILE SIDEBAR -->
  <mat-sidenav *appShellNoRender
    class="profile-sidebar !hidden lg:!block bg-skin-bgMuted shadow-sm border-0 rounded-none !fixed w-full max-w-xs"
    mode="side" [opened]="checkRouteUrl()">

    <div class="profile-sidebar-container py-32 px-10 text-skin-base">

      <div class="flex flex-col space-y-1">
        <a aria-labelledby="Link to about page" routerLink="/user/profile" (click)="seeMyInfos()"
          [ngClass]="activePage === MY_ACCOUNT ? 'link-active' : 'link-inactive'"
          class="group flex w-full items-center px-3 py-2 text-sm font-semibold rounded-md">
          <svg xmlns="http://www.w3.org/2000/svg" [ngClass]="activePage === MY_ACCOUNT ? 'svg-active' : 'svg-inactive'"
            class="text-skin-muted group-hover:text-skin-base flex-shrink-0 -ml-1 mr-3 h-6 w-6 transition-all duration-200"
            fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
          <span class="truncate">
            {{'sidebar.myInfos' | translate}}
          </span>
        </a>

        <a aria-labelledby="Link to about page" routerLink="/user/dashboard" (click)="fetchAllArticlesAsUser()"
          [ngClass]="activePage === MY_ARTICLES ? 'link-active' : 'link-inactive'"
          class="group flex w-full items-center px-3 py-2 text-sm font-semibold rounded-md">
          <svg xmlns="http://www.w3.org/2000/svg" [ngClass]="activePage === MY_ARTICLES ? 'svg-active' : 'svg-inactive'"
            class="text-skin-muted group-hover:text-skin-base flex-shrink-0 -ml-1 mr-3 h-6 w-6 transition-all duration-200"
            fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
          </svg>
          <span class="truncate">
            {{'sidebar.myArticles' | translate}}
          </span>
        </a>

        <a aria-labelledby="Link to about page" *ngIf="authService?.isAdmin" routerLink="/user/dashboard/admin"
          (click)="fetchAllArticlesAsAdmin()" [ngClass]="activePage === ALL_ARTICLES ? 'link-active' : 'link-inactive'"
          class="group flex w-full items-center px-3 py-2 text-sm font-semibold rounded-md">
          <svg xmlns="http://www.w3.org/2000/svg"
            [ngClass]="activePage === ALL_ARTICLES ? 'svg-active' : 'svg-inactive'"
            class="text-skin-muted group-hover:text-skin-base flex-shrink-0 -ml-1 mr-3 h-6 w-6 transition-all duration-200"
            fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
          </svg>
          <span class="truncate">
            {{'profile.allAdminArticles' | translate}}
          </span>
        </a>
      </div>

    </div>
  </mat-sidenav>
  <!-- END PROFILE SIDEBAR -->

</mat-sidenav-container>

<!-- <div class="route-loader-spinener fixed inset-0 bg-slate-100 bg-opacity-40 z-40" *ngIf="showRouteLoader">
  <div class="h-full flex items-center justify-center">
    <svg xmlns="http://www.w3.org/2000/svg" class="fill-skin-muted animate-spin" width="48px" height="48px"
      viewBox="0 0 32 32">
      <path
        d="M 16 3 C 14.34375 3 13 4.34375 13 6 C 13 7.65625 14.34375 9 16 9 C 17.65625 9 19 7.65625 19 6 C 19 4.34375 17.65625 3 16 3 Z M 8.9375 6.4375 C 7.558594 6.4375 6.4375 7.558594 6.4375 8.9375 C 6.4375 10.316406 7.558594 11.4375 8.9375 11.4375 C 10.316406 11.4375 11.4375 10.316406 11.4375 8.9375 C 11.4375 7.558594 10.316406 6.4375 8.9375 6.4375 Z M 23.0625 7.9375 C 22.511719 7.9375 22.0625 8.386719 22.0625 8.9375 C 22.0625 9.488281 22.511719 9.9375 23.0625 9.9375 C 23.613281 9.9375 24.0625 9.488281 24.0625 8.9375 C 24.0625 8.386719 23.613281 7.9375 23.0625 7.9375 Z M 6 13.75 C 4.757813 13.75 3.75 14.757813 3.75 16 C 3.75 17.242188 4.757813 18.25 6 18.25 C 7.242188 18.25 8.25 17.242188 8.25 16 C 8.25 14.757813 7.242188 13.75 6 13.75 Z M 26 14.75 C 25.308594 14.75 24.75 15.308594 24.75 16 C 24.75 16.691406 25.308594 17.25 26 17.25 C 26.691406 17.25 27.25 16.691406 27.25 16 C 27.25 15.308594 26.691406 14.75 26 14.75 Z M 8.9375 21.0625 C 7.832031 21.0625 6.9375 21.957031 6.9375 23.0625 C 6.9375 24.167969 7.832031 25.0625 8.9375 25.0625 C 10.042969 25.0625 10.9375 24.167969 10.9375 23.0625 C 10.9375 21.957031 10.042969 21.0625 8.9375 21.0625 Z M 23.0625 21.5625 C 22.234375 21.5625 21.5625 22.234375 21.5625 23.0625 C 21.5625 23.890625 22.234375 24.5625 23.0625 24.5625 C 23.890625 24.5625 24.5625 23.890625 24.5625 23.0625 C 24.5625 22.234375 23.890625 21.5625 23.0625 21.5625 Z M 16 24.25 C 15.035156 24.25 14.25 25.035156 14.25 26 C 14.25 26.964844 15.035156 27.75 16 27.75 C 16.964844 27.75 17.75 26.964844 17.75 26 C 17.75 25.035156 16.964844 24.25 16 24.25 Z" />
    </svg>
  </div>
</div> -->