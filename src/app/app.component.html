<mat-sidenav-container class="sidenav-container !overflow-visible bg-skin-bg">

  <!-- APP MOBILE SIDENAV -->
  <mat-sidenav #drawer class="sidenav mobile-sidebar-menu lg:!hidden relative rounded-bl-lg" position="end"
    fixedInViewport [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'" [mode]="'over'" [opened]="false">

    <div class="absolute top-6 right-6 w-fit" (click)="drawer.close()">
      <button type="button" aria-label="Toggle sidenav" (click)="drawer.toggle()">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Side nav toggle icon" class="h-6 w-6 text-primary-500"
          fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <ul>
      <a (click)="drawer.close()" class="sidenavLink" href="{{servicesUrl}}/#about">
        <div>{{'navbar.about' | translate}}</div>
      </a>

      <a (click)="drawer.close()" class="sidenavLink" href="{{coursesUrl}}">
        <div>{{'navbar.courses' | translate}}</div>
      </a>

      <a (click)="drawer.close()" class="sidenavLink" routerLink="/articles">
        <div>{{'navbar.blog' | translate}}</div>
      </a>

      <a (click)="drawer.close()" class="sidenavLink" href="{{servicesUrl}}" target="_blank">
        <div>{{'navbar.portfolio' | translate}}</div>
      </a>

      <a *ngIf="!(authService.currentUsr)" (click)="drawer.close()" class="sidenavLink" routerLink="/login">
        <div class="!font-medium text-primary-500">{{'navbar.login' | translate}}</div>
      </a>

      <a *ngIf="!(authService.currentUsr)" (click)="drawer.close()" class="sidenavLink" routerLink="/register">
        <div>{{'navbar.register' | translate}}</div>
      </a>

      <div *ngIf="authService.currentUsr as currentUsr" class="border border-primary-500 rounded-lg p-4 mt-5">
        <div class="flex items-center gap-2">
          <div>
            <app-image *ngIf="currentUsr?.profilePicture" [classes]="'h-10 w-10 rounded-full'"
              [sourceUrl]="currentUsr?.profilePicture!">
            </app-image>

            <ng-container *ngIf="!currentUsr?.profilePicture">
              <svg xmlns="http://www.w3.org/2000/svg"
                class="h-10 w-10 p-2 border-2 bg-primary-500 border-primary-500 text-white fill-white rounded-full"
                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
            </ng-container>
          </div>
          <div class="flex flex-wrap flex-1 text-sm text-primary-500 font-semibold">
            <span>{{currentUsr.fullName}}</span>
          </div>
        </div>

        <div class="mt-2">
          <a routerLink="/user/profile" (click)="drawer.close()"
            class="block py-2 px-1 rounded-md hover:bg-skin-link hover:text-primary-500 text-xs transition-all duration-200">
            <span>{{'navbar.myProfile' | translate}}</span>
          </a>

          <button (click)="logout()"
            class="block w-full text-left py-2 px-1 rounded-md hover:bg-skin-link hover:text-primary-500 text-xs transition-all duration-200">
            <span>{{'navbar.logout' | translate}}</span>
          </button>
        </div>
      </div>

    </ul>
  </mat-sidenav>
  <!-- END APP MOBILE SIDENAV  -->

  <mat-sidenav-content class="!overflow-visible">
    <!-- APP DESKTOP NAVBAR-->
    <div class="top-toolbar sticky top-0 shadow-sm bg-white py-2 z-50">
      <mat-toolbar class="top-toolbar-container !px-0">
        <a class="logo-link" routerLink="/">
          <div class="logo w-9/12 md:w-10/12 lg:w-11/12">
            <app-image [classes]="'max-w-full'" [sourceUrl]="appLogoUrl">
            </app-image>
          </div>
        </a>

        <div class="navbar-links hidden lg:flex items-center text-secondary">
          <a class="navLink" href="{{servicesUrl}}/#about">
            <div>{{'navbar.about' | translate}}</div>
          </a>

          <a class="navLink" href="{{coursesUrl}}">
            <div>{{'navbar.courses' | translate}}</div>
          </a>

          <a class="navLink" routerLink="/articles">
            <div>{{'navbar.blog' | translate}}</div>
          </a>

          <a class="navLink" href="{{servicesUrl}}" target="_blank">
            <div>{{'navbar.portfolio' | translate}}</div>
          </a>

          <ng-container class="navbar-links-hidden-on-server-rendering" *appShellNoRender>
            <a *ngIf="!(authService.currentUsr)" class="navLink" routerLink="/login">
              <div class="!font-medium text-primary-500">{{'navbar.login' | translate}}</div>
            </a>
            <a *ngIf="!(authService.currentUsr)" class="navLink" routerLink="/register">
              <div>{{'navbar.register' | translate}}</div>
            </a>

            <button *ngIf="authService.currentUsr as currentUsr" [matMenuTriggerFor]="menu" class="ml-4"
              aria-label="Example icon-button with a menu">

              <div *ngIf="currentUsr?.profilePicture" class="flex items-center text-sm space-x-2">
                <app-image [classes]="'h-10 w-10 rounded-full'" [sourceUrl]="currentUsr?.profilePicture!">
                </app-image>
              </div>

              <div *ngIf="!currentUsr?.profilePicture" class="flex items-center text-sm space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg"
                  class="h-10 w-10 p-2 border-2 bg-primary-500 border-primary-500 text-white fill-white rounded-full"
                  fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
              </div>
            </button>

            <mat-menu #menu="matMenu" class="mt-2 font-semibold text-skin-base">
              <a routerLink="/user/profile"
                class="block px-4 py-2 hover:bg-skin-link hover:text-primary-500 text-xs transition-all duration-200">
                <span>{{'navbar.myProfile' | translate}}</span>
              </a>

              <button (click)="logout()"
                class="inline-block w-full px-4 py-2 font-semibold hover:bg-skin-link hover:text-primary-500 text-xs transition-all duration-200">
                <span>{{'navbar.logout' | translate}}</span>
              </button>
            </mat-menu>
          </ng-container>

        </div>

        <button type="button" aria-label="Toggle sidenav" (click)="drawer.toggle()" class="lg:hidden">
          <svg xmlns="http://www.w3.org/2000/svg" aria-label="Side nav toggle icon" class="h-6 w-6" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </mat-toolbar>
    </div>
    <!-- END APP DESKTOP NAVBAR -->

    <!-- APP CONTENT -->
    <div class="site-container">
      <router-outlet></router-outlet>
    </div>
    <!-- END APP CONTENT -->

    <!-- APP FOOTER -->
    <app-footer></app-footer>
    <!-- END APP FOOTER -->
  </mat-sidenav-content>

  <!-- PROFILE SIDEBAR -->
  <mat-sidenav *appShellNoRender
    class="profile-sidebar !hidden lg:!block bg-skin-bgMuted shadow-sm border-0 rounded-none !fixed w-full max-w-xs"
    mode="side" [opened]="checkRouteUrl()">

    <div class="profile-sidebar-container py-32 px-10 text-skin-base">

      <div class="flex flex-col space-y-1">
        <a routerLink="/user/profile" (click)="seeMyInfos()"
          [ngClass]="activePage === MY_ACCOUNT ? 'link-active' : 'link-inactive'"
          class="group flex w-full items-center px-3 py-2 text-sm font-semibold rounded-md">
          <svg xmlns="http://www.w3.org/2000/svg" [ngClass]="activePage === MY_ACCOUNT ? 'svg-active' : 'svg-inactive'"
            class="text-skin-muted group-hover:text-skin-base flex-shrink-0 -ml-1 mr-3 h-6 w-6 transition-all duration-200"
            fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
          <span class="truncate">
            {{'sidebar.myInfos' | translate}}
          </span>
        </a>

        <a routerLink="/user/dashboard" (click)="fetchAllArticlesAsUser()"
          [ngClass]="activePage === MY_ARTICLES ? 'link-active' : 'link-inactive'"
          class="group flex w-full items-center px-3 py-2 text-sm font-semibold rounded-md">
          <svg xmlns="http://www.w3.org/2000/svg" [ngClass]="activePage === MY_ARTICLES ? 'svg-active' : 'svg-inactive'"
            class="text-skin-muted group-hover:text-skin-base flex-shrink-0 -ml-1 mr-3 h-6 w-6 transition-all duration-200"
            fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
          </svg>
          <span class="truncate">
            {{'sidebar.myArticles' | translate}}
          </span>
        </a>

        <a *ngIf="authService?.isAdmin" routerLink="/user/dashboard/admin" (click)="fetchAllArticlesAsAdmin()"
          [ngClass]="activePage === ALL_ARTICLES ? 'link-active' : 'link-inactive'"
          class="group flex w-full items-center px-3 py-2 text-sm font-semibold rounded-md">
          <svg xmlns="http://www.w3.org/2000/svg"
            [ngClass]="activePage === ALL_ARTICLES ? 'svg-active' : 'svg-inactive'"
            class="text-skin-muted group-hover:text-skin-base flex-shrink-0 -ml-1 mr-3 h-6 w-6 transition-all duration-200"
            fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
          </svg>
          <span class="truncate">
            {{'profile.allAdminArticles' | translate}}
          </span>
        </a>
      </div>

    </div>
  </mat-sidenav>
  <!-- END PROFILE SIDEBAR -->

</mat-sidenav-container>