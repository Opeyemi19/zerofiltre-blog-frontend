<div *ngIf="loading; else popupContent">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20 font-bold text-primary-500 animate-spin" fill="none"
        viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
    </svg>
</div>

<ng-template #popupContent>
    <div class="content">
        <input name="title" id="title" required minlength="4"
            class="w-full bg-transparent border-b border-skin-border !pb-2 focus:outline-none placeholder:text-skin-muted text-secondary text-xl sm:text-2xl lg:text-5xl font-semibold placeholder:font-extrabold placeholder:text-xl sm:placeholder:text-2xl lg:placeholder:text-5xl focus:border-b-skin-borderBold"
            placeholder={{placeholder}} [(ngModel)]="title" #name="ngModel" />

        <div *ngIf="name.invalid && name.dirty" class="">
            <div *ngIf="name.errors?.['required']" class="mt-2 text-xs sm:text-sm text-error italic">
                Le titre est obligatoire.
            </div>
            <div *ngIf="name.errors?.['minlength']" class="mt-2 text-xs sm:text-sm text-error italic">
                Le titre doit comporter au moins 4 caractères.
            </div>
        </div>

        <div class="mt-2 text-xs sm:text-sm text-skin-muted font-light italic space-x-2">
            <span><span class="font-bold">*</span> Vous pourrez le modifier à tout moment lors de l'édition de votre
                article
            </span>
        </div>

        <div class=" flex space-x-1 sm:space-x-2 mt-4">
            <button
                class="px-4 py-2 border border-skin-border rounded-full shadow-sm bg-skin-card text-sm leading-5 font-semibold text-skin-base hover:bg-skin-cardMuted focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-body focus:ring-primary-500 transition-all duration-300"
                (click)="onNoClick()">
                Annuler
            </button>

            <div *ngIf="name.invalid; else validBtn">
                <button
                    class="px-4 py-2 border border-primary-500 shadow-sm bg-primary-500 opacity-[0.15] rounded-full text-sm text-white leading-5 font-semibold"
                    type="submit" disabled>
                    Commencer
                </button>
            </div>
            <ng-template #validBtn>
                <button type="submit" (click)="handleArticleInit()"
                    class="px-4 py-2 border border-primary-500 rounded-full shadow-sm bg-primary-500 text-sm leading-5 font-semibold text-white hover:text-primary-500 hover:bg-skin-cardMuted hover:border-primary-500 focus:outline-none focus:ring-offset-2 focus:ring-primary-500 focus:border-skin-border transition-all duration-300">
                    Commencer
                </button>
            </ng-template>
        </div>
    </div>
</ng-template>